{"ast":null,"code":"import axios from 'axios';\nimport { Message } from 'element-ui';\nimport router from '../router';\n请求拦截器;\naxios.interceptors.request.use(config => {\n  // 如果存在 token，请求携带这个 token\n  if (window.sessionStorage.getItem('tokenStr')) {\n    config.headers['Authorization'] = window.sessionStorage.getItem('tokenStr');\n  }\n  return config;\n}, error => {\n  console.log(error);\n});\n\n// 响应拦截器\naxios.interceptors.response.use(success => {\n  // 业务逻辑错误\n  if (success.status && success.status == 200) {\n    if (success.data.code == 500 || success.data.code == 401 || success.data.code == 403) {\n      Message.error({\n        message: success.data.message\n      });\n      return;\n    }\n    if (success.data.message) {\n      Message.success({\n        message: success.data.message\n      });\n    }\n  }\n  return success.data;\n}, error => {\n  if (error.response.code == 504 || error.response.code == 404) {\n    Message.error({\n      message: '服务器被吃了'\n    });\n  } else if (error.response.code == 403) {\n    Message.error({\n      message: '权限不足，请联系管理员！'\n    });\n  } else if (error.response.ocde == 401) {\n    Message.error({\n      message: '尚未登录，请登录！'\n    });\n    router.replace('/');\n  } else {\n    if (error.response.data.message) {\n      Message.error({\n        message: error.response.data.message\n      });\n    } else {\n      Message.error({\n        message: '未知错误 o(╯□╰)o'\n      });\n    }\n  }\n  return;\n});\nlet base = '';\nexport const postRequest = (url, params) => {\n  return axios({\n    method: 'post',\n    url: `${base}${url}`,\n    data: params\n  });\n};\nexport const putRequest = (url, params) => {\n  return axios({\n    method: 'put',\n    url: `${base}${url}`,\n    data: params\n  });\n};\nexport const getRequest = (url, params) => {\n  return axios({\n    method: 'get',\n    url: `${base}${url}`,\n    data: params\n  });\n};\nexport const deleteRequest = (url, params) => {\n  return axios({\n    method: 'delete',\n    url: `${base}${url}`,\n    data: params\n  });\n};","map":{"version":3,"names":["axios","Message","router","请求拦截器","interceptors","request","use","config","window","sessionStorage","getItem","headers","error","console","log","response","success","status","data","code","message","ocde","replace","base","postRequest","url","params","method","putRequest","getRequest","deleteRequest"],"sources":["/Users/hsk/Project/Diary/web/src/utils/api.js"],"sourcesContent":["import axios from 'axios'\nimport { Message } from 'element-ui';\nimport router from '../router'\n\n\n请求拦截器\naxios.interceptors.request.use(config=>{\n    // 如果存在 token，请求携带这个 token\n    if(window.sessionStorage.getItem('tokenStr')){\n        config.headers['Authorization'] = window.sessionStorage.getItem('tokenStr');\n    }\n    return config;\n},error=>{\n    console.log(error);\n\n})\n\n// 响应拦截器\naxios.interceptors.response.use(success=>{\n    // 业务逻辑错误\n    if(success.status && success.status == 200){\n        if(success.data.code == 500 || success.data.code == 401 || success.data.code == 403){\n            Message.error({message:success.data.message});\n            return;\n        }\n        if(success.data.message){\n            Message.success({message:success.data.message});\n        }\n    }\n    return success.data;\n\n},error=>{\n    if(error.response.code == 504 || error.response.code == 404){\n        Message.error({message:'服务器被吃了'});\n    }else if(error.response.code == 403){\n        Message.error({message:'权限不足，请联系管理员！'});\n    }else if(error.response.ocde == 401){\n        Message.error({message:'尚未登录，请登录！'});\n        router.replace('/');\n    }else{\n        if(error.response.data.message){\n            Message.error({message:error.response.data.message});\n        }else{\n            Message.error({message:'未知错误 o(╯□╰)o'});\n        }\n    }\n    return;\n})\n\n\nlet base = '';\nexport const postRequest=(url,params)=>{\n    return axios({\n        method: 'post',\n        url:`${base}${url}`,\n        data:params\n    })\n}\n\nexport const putRequest=(url,params)=>{\n    return axios({\n        method:'put',\n        url:`${base}${url}`,\n        data:params\n    })\n}\n\nexport const getRequest=(url,params)=>{\n    return axios({\n        method:'get',\n        url:`${base}${url}`,\n        data:params\n    })\n}\n\nexport const deleteRequest=(url,params)=>{\n    return axios({\n        method:'delete',\n        url:`${base}${url}`,\n        data:params\n    })\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
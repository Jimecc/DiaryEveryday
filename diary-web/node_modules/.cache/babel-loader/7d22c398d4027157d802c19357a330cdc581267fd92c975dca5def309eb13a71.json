{"ast":null,"code":"import axios from 'axios';\nimport { Message } from 'element-ui';\nimport router from '../router';\n\n// 请求拦截器\naxios.interceptors.request.use(config => {\n  // 如果存在 token，请求携带这个 token\n  if (window.sessionStorage.getItem('tokenStr')) {\n    config.headers['Authorization'] = window.sessionStorage.getItem('tokenStr');\n  }\n  return config;\n}, error => {\n  console.log(error);\n});\n\n// 响应拦截器\naxios.interceptors.response.use(success => {\n  // 业务逻辑错误\n  if (success.status && success.status == 200) {\n    if (success.data.code == 500 || success.data.code == 401 || success.data.code == 403) {\n      Message.error({\n        message: success.data.message\n      });\n      return;\n    }\n    if (success.data.message) {\n      Message.success({\n        message: success.data.message\n      });\n    }\n  }\n  return success.data;\n}, error => {\n  // if(error.response.code == 504 || error.response.code == 404){\n  //     Message.error({message:'服务器被吃了'});\n  // }else if(error.response.code == 403){\n  //     Message.error({message:'权限不足，请联系管理员！'});\n  // }else if(error.response.ocde == 401){\n  //     Message.error({message:'尚未登录，请登录！！！'});\n  //     router.replace('/');\n  // }else{\n  //     if(error.response.data.message){\n  //         Message.error({message:error.response.data.message});\n  //     }else{\n  //         Message.error({message:'未知错误 o(╯□╰)o'});\n  //     }\n  // }\n  // return;\n});\nlet base = '';\nexport const postRequest = (url, params) => {\n  return axios({\n    method: 'post',\n    url: `${base}${url}`,\n    data: params\n  });\n};\nexport const putRequest = (url, params) => {\n  return axios({\n    method: 'put',\n    url: `${base}${url}`,\n    data: params\n  });\n};\nexport const getRequest = (url, params) => {\n  return axios({\n    method: 'get',\n    url: `${base}${url}`,\n    data: params\n  });\n};\nexport const deleteRequest = (url, params) => {\n  return axios({\n    method: 'delete',\n    url: `${base}${url}`,\n    data: params\n  });\n};","map":{"version":3,"names":["axios","Message","router","interceptors","request","use","config","window","sessionStorage","getItem","headers","error","console","log","response","success","status","data","code","message","base","postRequest","url","params","method","putRequest","getRequest","deleteRequest"],"sources":["/Users/hsk/Project/Diary/web/src/utils/api.js"],"sourcesContent":["import axios from 'axios'\nimport { Message } from 'element-ui';\nimport router from '../router'\n\n\n// 请求拦截器\naxios.interceptors.request.use(config=>{\n    // 如果存在 token，请求携带这个 token\n    if(window.sessionStorage.getItem('tokenStr')){\n        config.headers['Authorization'] = window.sessionStorage.getItem('tokenStr');\n    }\n    return config;\n},error=>{\n    console.log(error);\n})\n\n// 响应拦截器\naxios.interceptors.response.use(success=>{\n    // 业务逻辑错误\n    if(success.status && success.status == 200){\n        if(success.data.code == 500 || success.data.code == 401 || success.data.code == 403){\n            Message.error({message:success.data.message});\n            return;\n        }\n        if(success.data.message){\n            Message.success({message:success.data.message});\n        }\n    }\n    return success.data;\n\n},error=>{\n    // if(error.response.code == 504 || error.response.code == 404){\n    //     Message.error({message:'服务器被吃了'});\n    // }else if(error.response.code == 403){\n    //     Message.error({message:'权限不足，请联系管理员！'});\n    // }else if(error.response.ocde == 401){\n    //     Message.error({message:'尚未登录，请登录！！！'});\n    //     router.replace('/');\n    // }else{\n    //     if(error.response.data.message){\n    //         Message.error({message:error.response.data.message});\n    //     }else{\n    //         Message.error({message:'未知错误 o(╯□╰)o'});\n    //     }\n    // }\n    // return;\n})\n\n\nlet base = '';\nexport const postRequest=(url,params)=>{\n    return axios({\n        method: 'post',\n        url:`${base}${url}`,\n        data:params\n    })\n}\n\nexport const putRequest=(url,params)=>{\n    return axios({\n        method:'put',\n        url:`${base}${url}`,\n        data:params\n    })\n}\n\nexport const getRequest=(url,params)=>{\n    return axios({\n        method:'get',\n        url:`${base}${url}`,\n        data:params\n    })\n}\n\nexport const deleteRequest=(url,params)=>{\n    return axios({\n        method:'delete',\n        url:`${base}${url}`,\n        data:params\n    })\n}\n\n\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,YAAY;AACpC,OAAOC,MAAM,MAAM,WAAW;;AAG9B;AACAF,KAAK,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAE;EACnC;EACA,IAAGC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC,EAAC;IACzCH,MAAM,CAACI,OAAO,CAAC,eAAe,CAAC,GAAGH,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC;EAC/E;EACA,OAAOH,MAAM;AACjB,CAAC,EAACK,KAAK,IAAE;EACLC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;AACtB,CAAC,CAAC;;AAEF;AACAX,KAAK,CAACG,YAAY,CAACW,QAAQ,CAACT,GAAG,CAACU,OAAO,IAAE;EACrC;EACA,IAAGA,OAAO,CAACC,MAAM,IAAID,OAAO,CAACC,MAAM,IAAI,GAAG,EAAC;IACvC,IAAGD,OAAO,CAACE,IAAI,CAACC,IAAI,IAAI,GAAG,IAAIH,OAAO,CAACE,IAAI,CAACC,IAAI,IAAI,GAAG,IAAIH,OAAO,CAACE,IAAI,CAACC,IAAI,IAAI,GAAG,EAAC;MAChFjB,OAAO,CAACU,KAAK,CAAC;QAACQ,OAAO,EAACJ,OAAO,CAACE,IAAI,CAACE;MAAO,CAAC,CAAC;MAC7C;IACJ;IACA,IAAGJ,OAAO,CAACE,IAAI,CAACE,OAAO,EAAC;MACpBlB,OAAO,CAACc,OAAO,CAAC;QAACI,OAAO,EAACJ,OAAO,CAACE,IAAI,CAACE;MAAO,CAAC,CAAC;IACnD;EACJ;EACA,OAAOJ,OAAO,CAACE,IAAI;AAEvB,CAAC,EAACN,KAAK,IAAE;EACL;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AAAA,CACH,CAAC;AAGF,IAAIS,IAAI,GAAG,EAAE;AACb,OAAO,MAAMC,WAAW,GAAC,CAACC,GAAG,EAACC,MAAM,KAAG;EACnC,OAAOvB,KAAK,CAAC;IACTwB,MAAM,EAAE,MAAM;IACdF,GAAG,EAAE,GAAEF,IAAK,GAAEE,GAAI,EAAC;IACnBL,IAAI,EAACM;EACT,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAME,UAAU,GAAC,CAACH,GAAG,EAACC,MAAM,KAAG;EAClC,OAAOvB,KAAK,CAAC;IACTwB,MAAM,EAAC,KAAK;IACZF,GAAG,EAAE,GAAEF,IAAK,GAAEE,GAAI,EAAC;IACnBL,IAAI,EAACM;EACT,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMG,UAAU,GAAC,CAACJ,GAAG,EAACC,MAAM,KAAG;EAClC,OAAOvB,KAAK,CAAC;IACTwB,MAAM,EAAC,KAAK;IACZF,GAAG,EAAE,GAAEF,IAAK,GAAEE,GAAI,EAAC;IACnBL,IAAI,EAACM;EACT,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMI,aAAa,GAAC,CAACL,GAAG,EAACC,MAAM,KAAG;EACrC,OAAOvB,KAAK,CAAC;IACTwB,MAAM,EAAC,QAAQ;IACfF,GAAG,EAAE,GAAEF,IAAK,GAAEE,GAAI,EAAC;IACnBL,IAAI,EAACM;EACT,CAAC,CAAC;AACN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}
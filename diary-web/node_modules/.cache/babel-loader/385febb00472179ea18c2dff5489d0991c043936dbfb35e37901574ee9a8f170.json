{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport FilesManagement from \"@/components/FilesManagement.vue\";\nexport default {\n  name: \"NewDiaryView\",\n  props: {\n    diary_id: String\n  },\n  components: {\n    FilesManagement\n  },\n  data() {\n    return {\n      articleForm: {\n        id: null,\n        manager_id: null,\n        title: '',\n        create_date: new Date(),\n        article: '',\n        info: '',\n        color: '',\n        weather: '',\n        score: 0,\n        collection: 0,\n        shit: 0\n      },\n      icons: {\n        collection: 'el-icon-star-off',\n        date: 'el-icon-date',\n        shit: 'el-icon-help',\n        weather: 'el-icon-cloudy-and-sunny'\n      },\n      istyle: {\n        collection: 'margin-left: 10px;width:50px;height:50px',\n        date: 'margin-left:0px',\n        shit: '',\n        weather: '',\n        colors: {\n          oragne: 'background-color: coral',\n          green: 'background-color: greenyellow',\n          purple: 'background-color: violet',\n          gray: 'background-color: gray',\n          yellow: 'background-color: yellow',\n          pure: 'background-color: #fff'\n        }\n      },\n      show: {\n        show_pic_div: false\n      },\n      value1: null,\n      value2: null,\n      value3: new Date(),\n      show_date: false,\n      show_weather: false,\n      drawer: false,\n      article: ''\n    };\n  },\n  mounted() {\n    this.mounted_edit_diary();\n  },\n  methods: {\n    click_out_without_save() {\n      this.$confirm('检测到未保存的内容，是否在离开页面前保存修改？', '确认信息', {\n        distinguishCancelAndClose: true,\n        confirmButtonText: '保存',\n        cancelButtonText: '放弃修改'\n      }).then(() => {\n        this.$message({\n          type: 'info',\n          message: '保存修改'\n        });\n        this.$store.commit('show_editor_page_false');\n      }).catch(action => {\n        this.$message({\n          type: 'info',\n          message: action === 'cancel' ? '放弃保存并离开页面' : '停留在当前页面'\n        });\n        this.$store.commit('show_editor_page_false');\n      });\n    },\n    click_show_pic_button() {\n      this.show.show_pic_div = !this.show.show_pic_div;\n    },\n    mounted_edit_diary() {\n      if (this.diary_id != '') {\n        this.getRequest('/diary/article/' + this.$route.query.did).then(resp => {\n          if (resp) {\n            // alert(JSON.stringify(resp.data.obj));\n            this.articleForm = resp.data.obj;\n          }\n        });\n      }\n    },\n    // 点击了日期按钮\n    click_show_date() {\n      if (this.show_date == true) {\n        this.show_date = false;\n        this.icons.date = 'el-icon-date';\n        this.istyle.date = 'margin-left:0px';\n      } else {\n        this.icons.date = 'el-icon-loading';\n        this.istyle.date = 'margin-left:0px;background-color:#cfe6ff;border:#409EFF 1px solid;color:#ff7f50';\n        this.show_date = true;\n      }\n    },\n    // 点击了天气按钮\n    click_show_weather() {\n      if (this.show_weather == true) {\n        this.show_weather = false;\n        this.icons.weather = 'el-icon-cloudy-and-sunny';\n        this.istyle.weather = '';\n      } else {\n        this.show_weather = true;\n        this.icons.weather = 'el-icon-sunny';\n        this.istyle.weather = 'background-color:#cfe6ff;border:#409EFF 1px solid;color:#ff7f50';\n      }\n    },\n    // 点击了收藏按钮\n    click_collect() {\n      this.articleForm.shit = 0;\n      this.istyle.shit = '';\n      if (this.articleForm.collection == 1) {\n        this.articleForm.collection = 0;\n        this.icons.collection = 'el-icon-star-off';\n        this.istyle.collection = '';\n      } else {\n        this.articleForm.collection = 1;\n        this.icons.collection = 'el-icon-star-on';\n        this.istyle.collection = 'background-color:#cfe6ff;border:#409EFF 1px solid;color:#ff7f50';\n      }\n    },\n    click_shit() {\n      this.articleForm.collection = 0;\n      this.istyle.collection = '';\n      this.icons.collection = 'el-icon-star-off';\n      if (this.articleForm.shit == 1) {\n        this.articleForm.shit = 0;\n        this.istyle.shit = '';\n      } else {\n        this.articleForm.shit = 1;\n        this.istyle.shit = 'background-color:#cfe6ff;border:#409EFF 1px solid;color:#ff7f50';\n      }\n    },\n    // 功能按钮\n    goBack() {\n      this.$router.push('/');\n    },\n    click_submit() {\n      this.postRequest('/diary/insert', this.articleForm).then(resp => {\n        if (resp) {\n          // alert(resp.data.code);\n          // alert(JSON.stringify(this.articleForm));\n          if (resp.data.code == 200) {\n            this.articleForm = resp.data.obj;\n            // alert(JSON.stringify(resp.data.obj));\n            // alert(resp.message);\n          }\n        }\n      });\n    },\n\n    color_orange() {\n      this.init_color();\n      this.istyle.colors.oragne = 'background-color: coral; box-shadow: 0 0 8px red;';\n      this.articleForm.color = 'coral';\n    },\n    color_green() {\n      this.init_color();\n      this.istyle.colors.green = 'background-color: greenyellow;box-shadow: 0 0 8px green;';\n      this.articleForm.color = 'greenyellow';\n    },\n    color_purple() {\n      this.init_color();\n      this.istyle.colors.purple = 'background-color: violet;box-shadow: 0 0 8px purple;';\n      this.articleForm.color = 'violet';\n    },\n    color_gray() {\n      this.init_color();\n      this.istyle.colors.gray = 'background-color: gray;   box-shadow: 0 0 8px gray;';\n      this.articleForm.color = 'gray';\n    },\n    color_yellow() {\n      this.init_color();\n      this.istyle.colors.yellow = 'background-color: yellow;box-shadow: 0 0 8px gray;';\n      this.articleForm.color = 'yellow';\n    },\n    color_pure() {\n      this.init_color();\n      this.articleForm.color = '';\n    },\n    init_color() {\n      this.istyle.colors.oragne = 'background-color: coral';\n      this.istyle.colors.green = 'background-color: greenyellow';\n      this.istyle.colors.purple = 'background-color: violet';\n      this.istyle.colors.gray = 'background-color: gray';\n      this.istyle.colors.yellow = 'background-color: yellow';\n      this.istyle.colors.pure = 'background-color: #fff';\n    },\n    click_weather(weather) {\n      this.articleForm.weather = weather;\n    }\n  }\n};","map":{"version":3,"mappings":";AAwHA;AACA;EACAA;EACAC;IACAC;EACA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAF;QACAG;QACAF;QACAH;MACA;MACAM;QACAJ;QACAG;QACAF;QACAH;QACAO;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;QACA;MACA;MACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAxB;IACA;EACA;EACAyB;IACA;EACA;EACAC;IACAC;MACA;QACAC;QACAC;QACAC;MACA,GACAC;QACA;UACAC;UACAC;QACA;QACA;MACA,GAEAC;QACA;UACAF;UACAC,+BACA,cACA;QACA;QACA;MACA;IAEA;IACAE;MACA;IACA;IACAC;MACA;QACA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;UACA;UACA;UACA;YACA;YACA;YACA;UACA;QACA;MACA;IACA;;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;EACA;AACA","names":["name","props","diary_id","components","FilesManagement","data","articleForm","id","manager_id","title","create_date","article","info","color","weather","score","collection","shit","icons","date","istyle","colors","oragne","green","purple","gray","yellow","pure","show","show_pic_div","value1","value2","value3","show_date","show_weather","drawer","mounted","methods","click_out_without_save","distinguishCancelAndClose","confirmButtonText","cancelButtonText","then","type","message","catch","click_show_pic_button","mounted_edit_diary","click_show_date","click_show_weather","click_collect","click_shit","goBack","click_submit","color_orange","color_green","color_purple","color_gray","color_yellow","color_pure","init_color","click_weather"],"sourceRoot":"src/views","sources":["NewDiaryView.vue"],"sourcesContent":["<template>\n  <div class=\"div_1\">\n    <el-container>\n      <el-header>\n        <el-page-header style=\"margin-top: 25px\" content=\"编辑日记\" @back=\"goBack\"></el-page-header>\n      </el-header>\n      <el-divider>每日一记</el-divider>\n      <el-container>\n        <el-aside class=\"aside_1\">\n          <el-input v-model=\"articleForm.title\" class=\"input_title\" placeholder=\"请输入文章标题\"></el-input>\n          <div style=\"margin-top: 15px;\">\n            <el-tooltip content=\"选择日期(默认今天)\" placement=\"bottom\" effect=\"light\">\n              <el-button @click=\"click_show_date\" :style=\"istyle.date\" class=\"button_4\" size=\"small\" :icon=\"icons.date\"></el-button>\n            </el-tooltip>\n            <el-tooltip content=\"天气\" placement=\"bottom\" effect=\"light\">\n              <el-button @click=\"click_show_weather\" :style=\"istyle.weather\" class=\"button_4\" size=\"small\"  :icon=\"icons.weather\"></el-button>\n            </el-tooltip>\n            <el-tooltip content=\"今天心情太好啦！收藏一下吧！\" placement=\"bottom\" effect=\"light\">\n              <el-button @click=\"click_collect\" :style=\"istyle.collection\" class=\"button_4\" size=\"small\" :icon=\"icons.collection\"></el-button>\n            </el-tooltip>\n            <el-tooltip content=\"今天心情不太行...放到厕所当厕纸吧（沉底）\" placement=\"bottom\" effect=\"light\">\n              <el-button @click=\"click_shit\" :style=\"istyle.shit\" class=\"button_4\" size=\"small\" icon=\"el-icon-toilet-paper\"></el-button>\n            </el-tooltip>\n          </div>\n\n          <!--天气-->\n          <div v-if=\"show_weather\" class=\"div_weather\">\n            <el-tooltip content=\"晴天\" placement=\"top\" effect=\"light\">\n              <el-button @click=\"click_weather('sunny')\" plain type=\"primary\" class=\"button_weather\" icon=\"el-icon-sunny\"></el-button>\n            </el-tooltip>\n            <el-tooltip content=\"多云\" placement=\"top\" effect=\"light\">\n              <el-button @click=\"click_weather('cloudy')\" plain type=\"primary\" class=\"button_weather\" icon=\"el-icon-cloudy\"></el-button>\n            </el-tooltip>\n            <el-tooltip content=\"多云转晴\" placement=\"top\" effect=\"light\">\n              <el-button @click=\"click_weather('cloudy_sunny')\" plain type=\"primary\" class=\"button_weather\" icon=\"el-icon-cloudy-and-sunny\"></el-button>\n            </el-tooltip>\n            <el-tooltip content=\"下雨啦\" placement=\"top\" effect=\"light\">\n              <el-button @click=\"click_weather('rain')\" plain type=\"primary\" class=\"button_weather\" icon=\"el-icon-heavy-rain\"></el-button>\n            </el-tooltip>\n            <el-tooltip content=\"打雷啦\" placement=\"top\" effect=\"light\">\n              <el-button @click=\"click_weather('light')\" plain type=\"primary\" class=\"button_weather\" icon=\"el-icon-lightning\"></el-button>\n            </el-tooltip>\n            <el-tooltip content=\"下雪啦\" placement=\"top\" effect=\"light\">\n              <el-button @click=\"click_weather('snow')\" plain type=\"primary\" class=\"button_weather\" icon=\"el-icon-light-rain\"></el-button>\n            </el-tooltip>\n          </div>\n          <div style=\"margin-top: 15px\">\n            <el-button size=\"small\" @click=\"color_orange\" :style=\"istyle.colors.oragne\" class=\"button_color\"></el-button>\n            <el-button size=\"small\" @click=\"color_green\"  :style=\"istyle.colors.green\"  class=\"button_color\"></el-button>\n            <el-button size=\"small\" @click=\"color_purple\" :style=\"istyle.colors.purple\" class=\"button_color\"></el-button>\n            <el-button size=\"small\" @click=\"color_gray\"   :style=\"istyle.colors.gray\"   class=\"button_color\"></el-button>\n            <el-button size=\"small\" @click=\"color_yellow\" :style=\"istyle.colors.yellow\" class=\"button_color\"></el-button>\n            <el-button size=\"small\" @click=\"color_pure\" :style=\"istyle.colors.pure\"   class=\"button_color\"></el-button>\n          </div>\n          <el-divider content-position=\"left\">给今天打个分吧</el-divider>\n          <div class=\"block\">\n            <el-rate\n                v-model=\"articleForm.score\">\n            </el-rate>\n          </div>\n          <el-divider></el-divider>\n          <div v-if=\"show_date\">\n            <el-date-picker\n                v-model=\"articleForm.create_date\"\n                type=\"date\"\n                placeholder=\"选择日期\">\n            </el-date-picker>\n            <el-divider></el-divider>\n          </div>\n          <div>\n            <el-button @click=\"click_submit\" type=\"primary\" class=\"button-submit\">提交</el-button>\n            <div style=\"display: flex;margin-top: 10px\">\n              <el-button @click=\"click_out_without_save\" type=\"danger\" plain class=\"button-submit-nosave\">不保存退出</el-button>\n              <el-button @click=\"click_out_and_save\" type=\"info\" plain class=\"button-submit-save\">保存并退出</el-button>\n            </div>\n          </div>\n        </el-aside>\n        <el-divider direction=\"vertical\"></el-divider>\n        <el-main>\n          <div style=\"width: 100%;display: flex\">\n            <div style=\"width: 80%\">\n              <el-button size=\"small\" type=\"text\" icon=\"el-icon-picture-outline\">插入图片</el-button>\n              <el-button size=\"small\" type=\"text\" icon=\"el-icon-folder-opened\">新建相关相册</el-button>\n              <el-drawer\n                  class=\"el_drawer_pics\"\n                  title=\"附件管理\"\n                  size=\"60%\"\n                  :visible.sync=\"drawer\"\n                  :with-header=\"true\">\n                <FilesManagement/>\n\n                <!--            <router-view/>-->\n              </el-drawer>\n            </div>\n            <div style=\"text-align: right;width: 18%\">\n              <el-button size=\"small\"  @click=\"drawer = true\"type=\"text\" icon=\"el-icon-picture-outline\" >显示相册</el-button>\n            </div>\n          </div>\n          <div style=\"display: flex\">\n            <el-input\n                type=\"textarea\"\n                :autosize=\"{minRows:25,maxRows:30}\"\n                placeholder=\"请输入内容\"\n                v-model=\"articleForm.article\"\n                show-word-limit=\"true\"\n                clearable=\"true\"\n                suffix-icon=\"el-icon-tickets\"\n            >\n            </el-input>\n            <div v-if=\"show.show_pic_div\" class=\"div-pics\">\n              123\n            </div>\n          </div>\n        </el-main>\n      </el-container>\n    </el-container>\n\n  </div>\n</template>\n<script>\nimport FilesManagement from \"@/components/FilesManagement.vue\";\nexport default {\n  name: \"NewDiaryView\",\n  props:{\n    diary_id: String\n  },\n  components:{\n    FilesManagement\n  },\n  data() {\n    return {\n      articleForm: {\n        id: null,\n        manager_id:null,\n        title: '',\n        create_date: new Date(),\n        article: '',\n        info: '',\n        color: '',\n        weather: '',\n        score: 0,\n        collection: 0,\n        shit: 0\n      },\n      icons:{\n        collection: 'el-icon-star-off',\n        date: 'el-icon-date',\n        shit: 'el-icon-help',\n        weather: 'el-icon-cloudy-and-sunny'\n      },\n      istyle:{\n        collection: 'margin-left: 10px;width:50px;height:50px',\n        date: 'margin-left:0px',\n        shit: '',\n        weather: '',\n        colors:{\n          oragne: 'background-color: coral',\n          green: 'background-color: greenyellow',\n          purple: 'background-color: violet',\n          gray: 'background-color: gray',\n          yellow: 'background-color: yellow',\n          pure: 'background-color: #fff'\n        }\n      },\n      show:{\n        show_pic_div: false\n      },\n      value1: null,\n      value2: null,\n      value3: new Date(),\n      show_date: false,\n      show_weather: false,\n      drawer: false,\n      article: ''\n    }\n  },\n  mounted() {\n    this.mounted_edit_diary();\n  },\n  methods:{\n    click_out_without_save(){\n      this.$confirm('检测到未保存的内容，是否在离开页面前保存修改？', '确认信息', {\n        distinguishCancelAndClose: true,\n        confirmButtonText: '保存',\n        cancelButtonText: '放弃修改'\n      })\n          .then(() => {\n            this.$message({\n              type: 'info',\n              message: '保存修改'\n            });\n            this.$store.commit('show_editor_page_false');\n          })\n\n          .catch(action => {\n            this.$message({\n              type: 'info',\n              message: action === 'cancel'\n                  ? '放弃保存并离开页面'\n                  : '停留在当前页面'\n            })\n            this.$store.commit('show_editor_page_false');\n          });\n\n    },\n    click_show_pic_button(){\n      this.show.show_pic_div = !this.show.show_pic_div;\n    },\n    mounted_edit_diary(){\n      if(this.diary_id != ''){\n        this.getRequest('/diary/article/'+this.$route.query.did).then(resp=>{\n          if (resp){\n            // alert(JSON.stringify(resp.data.obj));\n            this.articleForm = resp.data.obj;\n          }\n        })\n      }\n    },\n    // 点击了日期按钮\n    click_show_date(){\n      if(this.show_date ==true){\n        this.show_date = false;\n        this.icons.date = 'el-icon-date';\n        this.istyle.date = 'margin-left:0px';\n      }else{\n        this.icons.date = 'el-icon-loading';\n        this.istyle.date = 'margin-left:0px;background-color:#cfe6ff;border:#409EFF 1px solid;color:#ff7f50'\n        this.show_date = true;\n      }\n    },\n    // 点击了天气按钮\n    click_show_weather(){\n      if(this.show_weather == true){\n        this.show_weather = false;\n        this.icons.weather = 'el-icon-cloudy-and-sunny';\n        this.istyle.weather = '';\n      }else{\n        this.show_weather = true;\n        this.icons.weather = 'el-icon-sunny';\n        this.istyle.weather = 'background-color:#cfe6ff;border:#409EFF 1px solid;color:#ff7f50';\n      }\n    },\n    // 点击了收藏按钮\n    click_collect(){\n      this.articleForm.shit = 0;\n      this.istyle.shit = '';\n      if(this.articleForm.collection == 1){\n        this.articleForm.collection = 0;\n        this.icons.collection = 'el-icon-star-off';\n        this.istyle.collection = '';\n      }else{\n        this.articleForm.collection = 1;\n        this.icons.collection = 'el-icon-star-on';\n        this.istyle.collection = 'background-color:#cfe6ff;border:#409EFF 1px solid;color:#ff7f50';\n      }\n    },\n    click_shit(){\n      this.articleForm.collection = 0;\n      this.istyle.collection = '';\n      this.icons.collection = 'el-icon-star-off';\n      if(this.articleForm.shit == 1){\n        this.articleForm.shit = 0;\n        this.istyle.shit = '';\n      }else{\n        this.articleForm.shit = 1;\n        this.istyle.shit = 'background-color:#cfe6ff;border:#409EFF 1px solid;color:#ff7f50';\n      }\n    },\n    // 功能按钮\n    goBack(){\n      this.$router.push('/');\n    },\n    click_submit(){\n      this.postRequest('/diary/insert',this.articleForm).then(resp=>{\n        if(resp){\n          // alert(resp.data.code);\n          // alert(JSON.stringify(this.articleForm));\n          if(resp.data.code == 200) {\n            this.articleForm = resp.data.obj;\n            // alert(JSON.stringify(resp.data.obj));\n            // alert(resp.message);\n          }\n        }\n      })\n    },\n    color_orange(){\n      this.init_color();\n      this.istyle.colors.oragne='background-color: coral; box-shadow: 0 0 8px red;';\n      this.articleForm.color='coral';\n    },\n    color_green(){\n      this.init_color();\n      this.istyle.colors.green='background-color: greenyellow;box-shadow: 0 0 8px green;';\n      this.articleForm.color='greenyellow';\n    },\n    color_purple(){\n      this.init_color();\n      this.istyle.colors.purple='background-color: violet;box-shadow: 0 0 8px purple;';\n      this.articleForm.color='violet';\n    },\n    color_gray(){\n      this.init_color();\n      this.istyle.colors.gray='background-color: gray;   box-shadow: 0 0 8px gray;';\n      this.articleForm.color='gray';\n    },\n    color_yellow(){\n      this.init_color();\n      this.istyle.colors.yellow='background-color: yellow;box-shadow: 0 0 8px gray;';\n      this.articleForm.color='yellow';\n    },\n    color_pure(){\n      this.init_color();\n      this.articleForm.color='';\n    },\n    init_color(){\n      this.istyle.colors.oragne='background-color: coral';\n      this.istyle.colors.green='background-color: greenyellow';\n      this.istyle.colors.purple='background-color: violet';\n      this.istyle.colors.gray='background-color: gray';\n      this.istyle.colors.yellow='background-color: yellow';\n      this.istyle.colors.pure='background-color: #fff';\n    },\n    click_weather(weather){\n      this.articleForm.weather = weather;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.div_1{\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  /*background-color: blanchedalmond;*/\n}\n.header_1{\n  margin-top: 20px;\n}\n.input_title{\n  width: 100%;\n  border: lightslategray 1px solid;\n  border-radius: 5px;\n}\n.aside_1{\n  width: 250px;\n  padding: 30px;\n  /*background-color: coral;*/\n}\n.el-divider--vertical{\n  display: inline-block;\n  width: 1px;\n  height: 800px;\n  margin: 0 8px;\n  vertical-align: middle;\n  position: relative;\n}\n.button_color{\n  border-radius: 50%;\n  width: 15px;\n  height: 15px;\n  padding: 5px;\n  /*border: black .1px solid;*/\n}\n.button-submit{\n  width: 100%;\n}\n.button-submit-nosave{\n  width: 50%;\n}\n.button-submit-save{\n  width: 50%;\n}\n\n.el-date /deep/  .el-calendar-table .el-calendar-day{\n  width: 60px;\n  height: 40px;\n}\n.el_drawer_pics{\n}\n.div_weather{\n  margin-top: 15px;\n  background-color: #c3dad9;\n  padding: 10px 10px 10px 13px;\n  border-radius: 10px;\n}\n.button_weather{\n  border-radius: 50%;\n  width: 27px;\n  height: 27px;\n  padding: 5px;\n}\n.button_4 {\n  margin-left: 10px;\n  width: 50px;\n  height: 50px;\n  font-size: 18px;\n  border-radius: 15px;\n}\n.el-divider--horizontal {\n  display: block;\n  height: 1px;\n  width: 70%;\n  margin: 24px 14%;\n  /*background-color: orange;*/\n  /*box-shadow: 0 0 5px orange;*/\n}\n.div-pics{\n  width: 30%;\n  border: #333333 1px solid;\n  border-radius: 5px;\n  margin-left: 10px;\n  /*margin-right: 10px;*/\n}\n</style>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
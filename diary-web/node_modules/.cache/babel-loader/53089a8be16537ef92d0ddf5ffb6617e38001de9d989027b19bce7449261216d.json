{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport SideImage from '@/components/SideImage.vue';\nimport EditorDiary from '@/components/EditorDiary.vue';\nimport ViewImage from \"@/components/ViewImage.vue\";\nexport default {\n  name: \"DiaryView\",\n  components: {\n    EditorDiary,\n    SideImage,\n    ViewImage\n  },\n  data() {\n    return {\n      input_search: '',\n      reverse: true,\n      directories: [],\n      score: null,\n      search_date: new Date(),\n      diaryForm: {\n        id: null,\n        info: '',\n        title: null,\n        article: '',\n        create_date: null,\n        update_date: null,\n        color: '',\n        weather: '',\n        score: null,\n        collection: null,\n        shit: null,\n        delete: null,\n        manager_id: null\n      },\n      count: 0,\n      icons: {\n        order: 'el-icon-bottom' // 向下箭头\n      },\n\n      show: {\n        dialogViewImg: false,\n        show_color: false,\n        show_aside_title: true,\n        show_date: false,\n        fullscreen: false,\n        show_img: false,\n        // 为了开发改成true，最后一定要改为false\n        show_editor: false,\n        show_img_flag: false\n      },\n      colors: {\n        face: ['#99A9BF', '#F7BA2A', '#FF9900']\n      },\n      max: 7,\n      value: null,\n      images: [],\n      i: 0\n    };\n  },\n  mounted() {\n    this.getDirectory();\n  },\n  methods: {\n    clicklast(image) {\n      this.i--;\n      this.image_proportion(image);\n    },\n    clicknext(image) {\n      this.i++;\n      this.image_proportion(image);\n    },\n    click_view_image(index) {\n      this.show.dialogViewImg = true;\n      this.i = index;\n      console.log(index);\n    },\n    handleUploadForm(param) {\n      let formData = new FormData();\n      formData.append('file', param.file);\n      formData.append('diary_id', this.diaryForm.id);\n      this.postRequest('/file/upload', formData).then(res => {\n        if (res.code === 200) {\n          this.$message.success('提交成功');\n          this.getRequest('/file/list4article/' + this.diaryForm.id).then(resp => {\n            this.images = resp;\n          });\n        } else {\n          this.$message.error('提交失败');\n        }\n        this.formFileList = [];\n        this.uploadFormFileList = [];\n      });\n    },\n    click_upload(id) {\n      console.log(id);\n    },\n    beforeUploadHandle() {\n      alert(\"xxx\");\n    },\n    clickUploadForm(param) {\n      let formData = new FormData();\n      // 在formData中加入我们需要的参数\n      formData.append('file', param.file);\n      formData.append('diary_id', 1);\n      // 向后端发送数据\n      this.postRequest('/file/upload', formData).then(res => {\n        if (res.code === 200) {\n          this.$message.success('修改信息成功');\n        } else {\n          this.$message.success('修改信息失败');\n        }\n        this.formFileList = [];\n        this.uploadFormFileList = [];\n      });\n    },\n    click_layout() {\n      this.getRequest('/auth/logout').then(resp => {\n        if (resp) {\n          window.sessionStorage.removeItem('tokenStr');\n          window.sessionStorage.removeItem('user');\n          this.$router.replace('/');\n        }\n      });\n    },\n    click_delete_diary() {\n      if (this.diaryForm.id == 0) {\n        this.$message.error('错了哦，这是一条错误消息');\n      } else {\n        this.$confirm('此操作将删除该日记，是否继续？', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'error'\n        }).then(() => {\n          this.deleteRequest('/diary/delete/' + this.diaryForm.id).then(resp => {\n            if (resp.data.code == 200) {\n              this.$message({\n                type: 'success',\n                message: '删除成功!'\n              });\n              this.init_diary_form();\n              this.getDirectory();\n            } else {\n              this.$message.error('删除失败，可能您未选中文章，或已经提交过删除请求了！');\n            }\n          }).catch(() => {\n            this.$message({\n              type: 'info',\n              message: '已取消删除'\n            });\n          });\n        });\n      }\n    },\n    goNewDiary() {\n      this.$router.push('/new');\n    },\n    clickTest() {\n      this.getRequest('/time/20221221').then(resp => {\n        if (resp) {\n          this.diaryForm = resp.data.obj;\n        }\n      });\n    },\n    getDirectory() {\n      this.getRequest('/diary/directory/all').then(resp => {\n        if (resp) {\n          this.directories = resp;\n        }\n      });\n    },\n    click_order() {\n      if (this.reverse == true) {\n        this.reverse = false;\n        this.icons.order = 'el-icon-top';\n      } else {\n        this.reverse = true;\n        this.icons.order = 'el-icon-bottom';\n      }\n    },\n    click_show_color() {\n      this.show.show_color = !this.show.show_color;\n    },\n    click_button_color(color) {\n      this.getRequest('/diary/directory/color/' + color).then(resp => {\n        if (resp) {\n          this.directories = resp;\n        }\n      });\n    },\n    click_button_editor() {\n      this.$router.push({\n        path: '/edit',\n        query: {\n          did: this.diaryForm.id\n        }\n      });\n    },\n    clickDiaryName(id) {\n      // 请求相册\n      if (this.show.show_img || this.show.show_img_flag) {\n        // 如果相册是true，那么就请求\n        this.getRequest('/file/list4article/' + id).then(resp => {\n          if (resp.length > 0) {\n            console.log(\"请求到了\");\n            this.images = resp;\n            this.show.show_img = true;\n            console.log(this.images);\n          } else {\n            this.show.show_img = false;\n            this.$message({\n              message: '此日记没有相册',\n              type: 'info'\n            });\n          }\n        });\n      }\n\n      // 请求文章\n      this.getRequest('/diary/article/' + id).then(resp => {\n        if (resp) {\n          this.diaryForm = resp.obj;\n        }\n      });\n    },\n    click_show_img() {\n      if (!this.show.show_img) {\n        // false 打开相册\n        this.show.show_img_flag = true;\n        this.getRequest('/file/list4article/' + this.diaryForm.id).then(resp => {\n          if (resp.length > 0) {\n            this.images = resp;\n            console.log(this.images);\n            this.show.show_img = true;\n          } else {\n            this.show.show_img = false;\n            this.$message({\n              message: '该日记没有相册',\n              type: 'info'\n            });\n          }\n        });\n      } else {\n        // true 关闭相册\n        this.show.show_img_flag = false;\n        this.show.show_img = false;\n      }\n    },\n    makeDirectories(resp, max) {\n      for (var i = 0, len = resp.length; i < len; i++) {\n        if (resp.data[i].title.toString().length >= max) {\n          resp.data[i].title = resp.data[i].title.substring(0, max) + ' ···';\n        }\n      }\n      this.directories = resp.data;\n    },\n    click_collection() {\n      this.getRequest('/diary/directory/collection').then(resp => {\n        if (resp) {\n          this.directories = resp;\n        }\n      });\n    },\n    click_rate() {\n      this.getRequest('/diary/directory/score/' + this.score).then(resp => {\n        if (resp) {\n          this.directories = resp;\n        }\n      });\n    },\n    clickENTER() {\n      this.getRequest('/diary/search/directory/' + this.input_search).then(resp => {\n        this.directories = resp;\n      });\n    },\n    click_show_date() {\n      this.show.show_date = !this.show.show_date;\n    },\n    init_diary_form() {\n      this.diaryForm.id = null;\n      this.diaryForm.info = '';\n      this.diaryForm.title = null;\n      this.diaryForm.article = '';\n      this.diaryForm.create_date = null;\n      this.diaryForm.update_date = null;\n      this.diaryForm.color = '';\n      this.diaryForm.weather = '';\n      this.diaryForm.score = null;\n      this.diaryForm.collection = null;\n      this.diaryForm.shit = null;\n      this.diaryForm.delete = null;\n      this.diaryForm.manager_id = null;\n    }\n  }\n};","map":{"version":3,"mappings":";AAoLA;AACA;AACA;AACA;EACAA;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAV;QACAW;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;QACAC;MACA;;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QAAA;QACAC;QACAC;MACA;MACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACAC;IACA;IACAC;MACA;MACAC;MACAA;MACA;QACA;UACA;UACA;YACA;UACA;QACA;UACA;QACA;QACA;QACA;MACA;IAEA;IACAC;MACAH;IACA;IACAI;MACAC;IACA;IACAC;MACA;MACA;MACAJ;MACAA;MACA;MACA;QACA;UACA;QACA;UACA;QACA;QACA;QACA;MACA;IACA;IACAK;MACA;QACA;UACAC;UACAA;UACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;UACAC;UACAC;UACAC;QACA;UACA;YACA;cACA;gBACAA;gBACAC;cACA;cACA;cACA;YACA;cACA;YACA;UACA;YACA;cACAD;cACAC;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;MACA,EACA;IACA;IACAC;MACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACAC;QACAC;UACAC;QACA;MACA;IACA;IACAC;MACA;MACA;QAAA;QACA;UACA;YACAxB;YACA;YACA;YACAA;UACA;YACA;YACA;cACAa;cACAD;YACA;UACA;QACA;MACA;;MAEA;MACA;QACA;UACA;QACA;MACA;IACA;IACAa;MACA;QAAA;QACA;QACA;UACA;YACA;YACAzB;YACA;UACA;YACA;YACA;cACAa;cACAD;YACA;UACA;QACA;MACA;QAAA;QACA;QACA;MACA;IAEA;IACAc;MACA;QACA;UACAC;QACA;MACA;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;AACA","names":["name","components","EditorDiary","SideImage","ViewImage","data","input_search","reverse","directories","score","search_date","diaryForm","id","info","title","article","create_date","update_date","color","weather","collection","shit","delete","manager_id","count","icons","order","show","dialogViewImg","show_color","show_aside_title","show_date","fullscreen","show_img","show_editor","show_img_flag","colors","face","max","value","images","i","mounted","methods","clicklast","clicknext","click_view_image","console","handleUploadForm","formData","click_upload","beforeUploadHandle","alert","clickUploadForm","click_layout","window","click_delete_diary","confirmButtonText","cancelButtonText","type","message","goNewDiary","clickTest","getDirectory","click_order","click_show_color","click_button_color","click_button_editor","path","query","did","clickDiaryName","click_show_img","makeDirectories","resp","click_collection","click_rate","clickENTER","click_show_date","init_diary_form"],"sourceRoot":"src/views","sources":["DiaryView.vue"],"sourcesContent":["<template>\n  <div style=\"background-size: cover;height: 100%;\">\n    <el-container>\n\n      <el-header class=\"aheader-1\">\n        <el-input  class=\"input-search\" @keyup.enter.native=\"clickENTER\" size=\"small\" suffix-icon=\"el-icon-search\" v-model=\"input_search\" placeholder=\"看看那天的你在做什么？\"></el-input>\n      </el-header>\n      <el-divider>每日一记</el-divider>\n      <el-container class=\"aheader-2\">\n        <div class=\"header2-1\">\n          <el-button @click=\"getDirectory\" class=\"button1\" size=\"small\" icon=\"el-icon-milk-tea\"></el-button>\n          <el-button @click=\"click_show_date\" class=\"button2\" size=\"small\" icon=\"el-icon-date\"></el-button>\n          <el-button @click=\"click_show_color\" class=\"button2\" size=\"small\" icon=\"el-icon-price-tag\"></el-button>\n          <el-button @click=\"click_collection\" class=\"button2\" size=\"small\" icon=\"el-icon-star-off\"></el-button>\n          <el-button @click=\"click_order\" class=\"button2\" size=\"small\" :icon=\"icons.order\"></el-button>\n        </div>\n        <div class=\"header2-2\">\n          <el-button type=\"primary\" size=\"small\" icon=\"el-icon-circle-plus-outline\" class=\"button-header2-rignt-2\" @click=\"goNewDiary\">新建文章</el-button>\n          <el-button type=\"primary\" size=\"small\" icon=\"el-icon-setting\" class=\"button-header2-rignt-2\">设置</el-button>\n          <el-button type=\"primary\" size=\"small\" icon=\"el-icon-milk-tea\" class=\"button-header2-rignt-2\" @click=\"clickTest\"></el-button>\n          <el-button @click=\"click_layout\" type=\"danger\"  size=\"small\" icon=\"el-icon-bicycle\" class=\"button-header2-rignt-1\">退出</el-button>\n        </div>\n      </el-container>\n\n      <el-container>\n        <el-aside class=\"aside-out\">\n          <div v-if=\"show.show_date\" class=\"div-side-search-date\">\n            <el-date-picker v-model=\"search_date\"\n                            type=\"date\"\n                            class=\"el-date-picker-1\"\n                            placeholder=\"选择日期\">\n            </el-date-picker>\n            <el-button class=\"button-search-date\" type=\"primary\">查 找</el-button>\n          </div>\n          <div class=\"aside2-1\">\n            <div v-if=\"show.show_aside_title\" class=\"aside-title\">\n              <h1>我的日记</h1>\n            </div>\n            <div v-if=\"!this.show.show_color\" class=\"chose-color\" style=\"height: 38px\">\n              <el-button size=\"small\" @click=\"click_button_color('coral')\" class=\"button-5-color\" style=\"background-color: coral\"></el-button>\n              <el-button size=\"small\" @click=\"click_button_color('greenyellow')\"  class=\"button-5-color\" style=\"background-color: greenyellow\"></el-button>\n              <el-button size=\"small\" @click=\"click_button_color('violet')\" class=\"button-5-color\" style=\"background-color: violet\"></el-button>\n              <el-button size=\"small\" @click=\"click_button_color('gray')\"   class=\"button-5-color\" style=\"background-color: gray\"></el-button>\n              <el-button size=\"small\" @click=\"click_button_color('yellow')\" class=\"button-5-color\" style=\"background-color: yellow\"></el-button>\n            </div>\n            <div v-if=\"this.show.show_color\" class=\"chose-color\" style=\"padding: 5px 0;\">\n              <el-rate v-model=\"score\"></el-rate>\n                <el-tooltip content=\"查找\" placement=\"bottom\" effect=\"light\">\n                  <el-button size=\"small\" type=\"primary\" @click=\"click_rate\" style=\"  border-radius: 8px;height: 15px;padding: 5px;margin: 0px 0 0 70%;background-color:#fff;width: 45px\"></el-button>\n                </el-tooltip>\n            </div>\n\n            <div class=\"div2_4\">\n              <el-timeline :reverse=\"reverse\">\n                <el-timeline-item\n                    v-for=\"(directory, index) in directories\"\n                    :key=\"index\"\n                    :color=\"directory.color\">\n<!--                  :timestamp=\"directory.create_date\"-->\n                  <div class=\"div2_5\">\n                    <el-button style=\"color: gray;margin-top: -10px\" type=\"text\" @click=\"clickDiaryName(directory.id)\">\n                      <span style=\"color: black\">{{directory.title}}</span>\n                    </el-button>\n                    <el-button v-if=\"directory.collection==1\" type=\"text\" class=\"button_colletcion\" icon=\"el-icon-star-on\"></el-button>\n                  </div>\n                  <span style=\"color: grey;font-size: 13px\">{{directory.create_date}}</span>\n                  <el-rate\n                      v-model=\"directory.score\"\n                      disabled\n                      text-color=\"#ff9900\">\n                  </el-rate>\n                </el-timeline-item>\n              </el-timeline>\n            </div>\n          </div>\n        </el-aside>\n\n        <el-main class=\"main-out\" style=\"display: flex\">\n              <el-card class=\"article-card\">\n                <div slot=\"header\">\n                  <span class=\"article_title\">{{diaryForm.title}}</span>\n                  <span class=\"article_date\">{{diaryForm.create_date}}</span>\n                      <el-button :disabled=\"diaryForm.id == null\" icon=\"el-icon-delete\" @click=\"click_delete_diary\" style=\"font-size:20px;float: right; padding: 3px 0;margin-left: 10px\" :style=\"this.diaryForm.id==null ? '' : 'color:red'\" type=\"text\"></el-button>\n                      <el-button :disabled=\"diaryForm.id == null\" icon=\"el-icon-edit\" @click=\"click_button_editor\" style=\"font-size:20px;float: right; padding: 3px 0\" type=\"text\"></el-button>\n                      <el-button :disabled=\"diaryForm.id == null\" icon=\"el-icon-full-screen\" style=\"font-size:20px;float: right; padding: 3px 0\" type=\"text\"></el-button>\n                      <el-button :disabled=\"diaryForm.id == null\" icon=\"el-icon-picture-outline\" @click=\"click_show_img\" style=\"font-size:20px;float: right; padding: 3px 0\" type=\"text\"></el-button>\n<!--                      <el-upload-->\n<!--                          :http-request=\"handleUploadForm\"-->\n<!--                          :before-upload=\"beforeUploadHandle\"-->\n<!--                          class=\"upload-demo\"-->\n<!--                          multiple-->\n<!--                          :limit=\"10\">-->\n<!--                        <el-button :disabled=\"diaryForm.id == null\" @click=\"click_upload(diaryForm.id)\" icon=\"el-icon-upload2\" style=\"font-size:20px;float: right; padding: 3px 0\" type=\"text\"></el-button>-->\n<!--                      </el-upload>-->\n<!--                    </button-group>-->\n                </div>\n                <div class=\"text-item\">\n                  {{this.diaryForm.article}}\n                  <span v-if=\"this.diaryForm.article=='' && this.diaryForm.title==''\">[暂无内容]</span>\n                  <el-skeleton v-if=\"this.diaryForm.article==''\" />\n                </div>\n              </el-card>\n\n\n\n              <div  v-if=\"this.show.show_img\"  class=\"div-img-out\" style=\"height:720px;\">\n\n                <div class=\"diary-div-pics\">\n                  <div style=\"display: flow;width:40px;\">\n                    <el-row>\n                      <el-col  :span=\"32\" v-for=\"(img, index) in images\" :key=\"index\" :offset=\"index > 0 ? 2 : 0\">\n                        <div :body-style=\"{ padding: '0px' }\" style=\"overflow-x: hidden;width: 210px;height:auto;padding:10px;margin: 20px 30px 20px 30px;border: grey .1px solid;border-radius:15px;box-shadow: 0 0 5px #ababab\">\n                          <img style=\"width:100%;height: auto;left:0;right:0;margin:auto;box-shadow: 0 0 5px #ffebcd\" :src=\"img.url\" class=\"drawer-s-images\">\n                          <div style=\"padding: 14px;\">\n                            <span style=\"width: 90%;padding: 0 10px 0 0;\">{{ img.rname==null ? img.name : img.rname }}</span>\n                            <div>\n                              <time class=\"time\">{{ img.create_date }}</time>\n                            </div>\n                            <div class=\"div-img-button-edit\">\n                              <el-button type=\"text\" icon=\"el-icon-edit\"   class=\"button-img-edit\"></el-button>\n                              <el-button type=\"text\" icon=\"el-icon-view\"  @click=\"click_view_image(index)\"  class=\"button-img-edit\"></el-button>\n                              <el-button type=\"text\" icon=\"el-icon-delete\" class=\"button-img-edit\"></el-button>\n                            </div>\n                          </div>\n                        </div>\n                      </el-col>\n                    </el-row>\n                  </div>\n\n                </div>\n                <div style=\"height: 40px;width: 100%\">\n                  <el-upload\n                      :http-request=\"handleUploadForm\"\n                      class=\"upload-demo\"\n                      multiple\n                      show-file-list=\"false\">\n                    <el-button type=\"primary\" style=\"width: 300%;margin: 5px 5% 0 5%\">上传图片</el-button>\n                  </el-upload>\n                </div>\n\n              </div>\n        </el-main>\n      </el-container>\n    </el-container>\n    <el-dialog width=\"60%\" title=\"查看图片\" :visible.sync=\"show.dialogViewImg\">\n      <div class=\"div-out-width\" v-for=\"(image,index) in images\">\n        <div class=\"div-image-out\">\n          <img class=\"image-view\" v-show=\"index == i\" :src=\"image.url\"/>\n          <!--放图片信息与按钮的div-->\n          <div v-show=\"index==i\" style=\"width: 25%;padding:10px 0\">\n\n            <div style=\"width: 100%;margin-left: 5px\">\n              <div style=\"width: 100%;border-bottom: #999999 0.1px solid;padding-bottom: 3px;\">\n                <h1>{{image.rname?image.rname:image.name}}</h1>\n              </div>\n              <div style=\"width: 100%;border-bottom: #999999 0.1px solid;padding-bottom: 3px\">\n                <h4>创建时间</h4>\n                <span>{{ image.create_date }}</span>\n              </div>\n              <div style=\"width: 100%;border-bottom: #999999 0.1px solid;padding-bottom: 3px\">\n                <h4>简介</h4>\n                <span>{{image.info?image.info:\"没有简介信息哦～\"}}</span>\n              </div>\n            </div>\n\n            <div slot=\"footer\" v-show=\"index==i\" class=\"button-flooter\">\n              <el-button @click=\"clicklast(image)\" :disabled=\"i<=0\" type=\"primary\" style=\"border-radius: 20px 0 0 20px;\" size=\"small\" icon=\"el-icon-arrow-left\">上一页</el-button>\n              <el-button @click=\"clicknext(image)\"  :disabled=\"i>=images.length -1\" type=\"primary\" style=\"border-radius: 0 20px 20px 0;\" size=\"small\">下一页<i class=\"el-icon-arrow-right el-icon--right\"></i></el-button>\n            </div>\n            <!--        <el-button-group style=\"margin: 30px 7% 0 8%\">-->\n            <!--          -->\n            <!--        </el-button-group>-->\n          </div>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport SideImage from '@/components/SideImage.vue'\nimport EditorDiary from '@/components/EditorDiary.vue'\nimport ViewImage from \"@/components/ViewImage.vue\";\nexport default {\n  name: \"DiaryView\",\n  components:{\n    EditorDiary,\n    SideImage,\n    ViewImage\n  },\n  data() {\n    return {\n      input_search: '',\n      reverse: true,\n      directories: [],\n      score:null,\n      search_date:new Date(),\n      diaryForm:{\n        id:null,\n        info:'',\n        title:null,\n        article:'',\n        create_date:null,\n        update_date:null,\n        color:'',\n        weather:'',\n        score:null,\n        collection:null,\n        shit:null,\n        delete:null,\n        manager_id:null\n      },\n      count: 0,\n      icons:{\n        order: 'el-icon-bottom', // 向下箭头\n      },\n      show:{\n        dialogViewImg: false,\n        show_color: false,\n        show_aside_title:true,\n        show_date: false,\n        fullscreen: false,\n        show_img: false, // 为了开发改成true，最后一定要改为false\n        show_editor: false,\n        show_img_flag: false\n      },\n      colors:{\n        face:['#99A9BF', '#F7BA2A', '#FF9900']\n      },\n      max: 7,\n      value:null,\n      images:[],\n      i:0\n    }\n  },\n  mounted(){\n    this.getDirectory();\n  },\n  methods:{\n    clicklast(image){\n      this.i --;\n      this.image_proportion(image);\n    },\n    clicknext(image){\n      this.i++;\n      this.image_proportion(image);\n    },\n    click_view_image(index){\n      this.show.dialogViewImg = true;\n      this.i = index;\n      console.log(index);\n    },\n    handleUploadForm(param){\n        let formData = new FormData()\n        formData.append('file', param.file)\n        formData.append('diary_id', this.diaryForm.id)\n        this.postRequest('/file/upload', formData).then((res) => {\n          if (res.code === 200) {\n            this.$message.success('提交成功');\n            this.getRequest('/file/list4article/'+this.diaryForm.id).then(resp=> {\n              this.images = resp;\n            });\n          } else {\n            this.$message.error('提交失败')\n          }\n          this.formFileList = []\n          this.uploadFormFileList = []\n        })\n\n    },\n    click_upload(id){\n      console.log(id)\n    },\n    beforeUploadHandle(){\n      alert(\"xxx\")\n    },\n    clickUploadForm(param){\n      let formData = new FormData()\n      // 在formData中加入我们需要的参数\n      formData.append('file', param.file)\n      formData.append('diary_id', 1)\n      // 向后端发送数据\n      this.postRequest('/file/upload', formData).then((res) => {\n        if (res.code === 200) {\n          this.$message.success('修改信息成功')\n        } else {\n          this.$message.success('修改信息失败')\n        }\n        this.formFileList = []\n        this.uploadFormFileList = []\n      })\n    },\n    click_layout(){\n      this.getRequest('/auth/logout').then(resp=>{\n        if (resp){\n          window.sessionStorage.removeItem('tokenStr');\n          window.sessionStorage.removeItem('user');\n          this.$router.replace('/');\n        }\n      })\n    },\n    click_delete_diary(){\n      if(this.diaryForm.id == 0){\n        this.$message.error('错了哦，这是一条错误消息');\n      }else{\n          this.$confirm('此操作将删除该日记，是否继续？', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'error'\n          }).then(() => {\n            this.deleteRequest('/diary/delete/'+this.diaryForm.id).then(resp=>{\n              if(resp.data.code == 200){\n                this.$message({\n                  type: 'success',\n                  message: '删除成功!'\n                });\n                this.init_diary_form();\n                this.getDirectory();\n              }else{\n                this.$message.error('删除失败，可能您未选中文章，或已经提交过删除请求了！');\n              }\n          }).catch(() => {\n            this.$message({\n              type: 'info',\n              message: '已取消删除'\n            });\n          });\n        })\n      }\n    },\n    goNewDiary(){\n      this.$router.push('/new')\n    },\n    clickTest(){\n      this.getRequest('/time/20221221').then(resp=>{\n        if(resp){\n          this.diaryForm = resp.data.obj;\n        }\n      }\n      )\n    },\n    getDirectory(){\n      this.getRequest('/diary/directory/all').then(resp=>{\n        if(resp){\n          this.directories = resp;\n        }\n      })\n    },\n    click_order(){\n      if(this.reverse == true){\n        this.reverse = false;\n        this.icons.order = 'el-icon-top';\n      }else{\n        this.reverse = true;\n        this.icons.order = 'el-icon-bottom';\n      }\n    },\n    click_show_color(){\n      this.show.show_color = !this.show.show_color;\n    },\n    click_button_color(color){\n      this.getRequest('/diary/directory/color/'+color).then(resp=>{\n        if(resp) {\n          this.directories = resp;\n        }\n      })\n    },\n    click_button_editor(){\n      this.$router.push({\n        path: '/edit',\n        query: {\n          did: this.diaryForm.id,\n        }\n      });\n    },\n    clickDiaryName(id){\n      // 请求相册\n      if(this.show.show_img || this.show.show_img_flag){ // 如果相册是true，那么就请求\n        this.getRequest('/file/list4article/'+id).then(resp=>{\n          if(resp.length > 0){\n            console.log(\"请求到了\");\n            this.images = resp;\n            this.show.show_img = true;\n            console.log(this.images)\n          }else{\n            this.show.show_img = false\n            this.$message({\n              message: '此日记没有相册',\n              type: 'info'\n            });\n          }\n        })\n      }\n\n      // 请求文章\n      this.getRequest('/diary/article/'+id).then(resp=>{\n        if(resp){\n          this.diaryForm = resp.obj;\n        }\n      })\n    },\n    click_show_img(){\n      if(!this.show.show_img){ // false 打开相册\n        this.show.show_img_flag = true;\n        this.getRequest('/file/list4article/'+this.diaryForm.id).then(resp=>{\n          if(resp.length>0){\n            this.images = resp ;\n            console.log(this.images)\n            this.show.show_img= true;\n          }else{\n            this.show.show_img= false;\n            this.$message({\n              message: '该日记没有相册',\n              type: 'info'\n            });\n          }\n        })\n      }else{ // true 关闭相册\n        this.show.show_img_flag = false;\n        this.show.show_img = false;\n      }\n\n    },\n    makeDirectories(resp,max){\n      for(var i=0,len=resp.length;i<len;i++){\n        if((resp.data[i].title).toString().length >= max){\n          resp.data[i].title= resp.data[i].title.substring(0,max)+' ···';\n        }\n      }\n      this.directories = resp.data;\n    },\n    click_collection(){\n      this.getRequest('/diary/directory/collection').then(resp=>{\n        if(resp) {\n          this.directories = resp;\n        }\n      })\n    },\n    click_rate(){\n      this.getRequest('/diary/directory/score/'+this.score).then(resp=>{\n        if(resp){\n          this.directories = resp;\n        }\n      })\n    },\n    clickENTER(){\n      this.getRequest('/diary/search/directory/'+this.input_search).then(resp=>{\n        this.directories = resp;\n      })\n    },\n    click_show_date(){\n      this.show.show_date = !this.show.show_date;\n    },\n    init_diary_form() {\n          this.diaryForm.id = null;\n          this.diaryForm.info = '';\n          this.diaryForm.title = null;\n          this.diaryForm.article = '';\n          this.diaryForm.create_date = null;\n          this.diaryForm.update_date = null;\n          this.diaryForm.color = '';\n          this.diaryForm.weather = '';\n          this.diaryForm.score = null;\n          this.diaryForm.collection = null;\n          this.diaryForm.shit = null;\n          this.diaryForm.delete = null;\n          this.diaryForm.manager_id = null;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.aside2-1{\n  margin: 20px 0px 25px 15px;\n  width: 90%;\n  height: 90%;\n  background-color: #fff;\n  border-radius: 15px;\n  padding: 10px 0;\n  box-shadow: 0 0 10px #bebebe;\n}\n.div2_4{\n  overflow:auto;\n  text-overflow:ellipsis;\n  height: 78%;\n  width: 100%;\n  margin-top: 60px;\n  background-color: #f6f6f6;\n  border-top: gray 1px solid;\n  border-bottom: gray 1px solid;\n  padding: 15px 0;\n}\n.aheader-1{\n  text-align: center;\n  margin-top: 10px;\n}\n.aheader-2{\n  margin-top: 5px;\n}\n.header2-1{\n  width: 48%;\n  margin-left: 20px;\n  text-align: left;\n  /*background-color: #999999;*/\n}\n.header2-2{\n  width: 48%;\n  margin-left: 20px;\n  text-align: right;\n  /*background-color: #42b983;*/\n}\n.div2_5{\n  padding: 3px;\n  /*background-color: #42b983;*/\n  height: 30px;\n  /*border-bottom: #999999 .5px solid;*/\n}\n.input-search{\n  width: 95%;\n  height: 15px;\n  margin-top: 15px;\n  border: black;\n  margin-right: 10px;\n}\n.button_search{\n  width: 8%;\n}\n.button1{\n  background-image: url('../assets/xxx.png');\n  background-size: contain;\n  border-radius: 10px;\n  margin: 0 0px 0px 35px;\n  width: 43px;\n  color: #be9446;\n}\n.button2{\n  background-image: url('../assets/xxx.png');\n  background-size: contain;\n  border-radius: 10px;\n  margin: 0 0px 0px 15px;\n  width: 43px;\n  color:#be9446;\n}\n.button-header2-rignt-1{\n  margin-right: 40px;\n  border-radius: 10px;\n}\n.button-header2-rignt-2{\n  border-radius: 10px;\n}\n.button_xx{\n  border-radius: 15px;\n}\n.input-search>>>.el-input__inner { /*或者 .s2>>>.el-input__inner  */\n  border-radius: 20px; /*输入框圆角值*/\n}\n\n.aside-out{\n  margin-top: 0px;\n  margin-left: 30px;\n  width: 400px;\n  /*background-color: beige;*/\n  height: 800px;\n  border-radius: 20px;\n}\n.article_title{\n  font-size: 25px;\n  font-weight: 800;\n}\n.article_date{\n  font-size: medium;\n  font-weight: 400;\n  color: gray;\n  margin-left: 15px;\n}\n.button-5-color{\n  border-radius: 8px;\n  width: 15px;\n  height: 15px;\n  padding: 5px;\n  margin: -10px 0 0 10px;\n}\n.button_colletcion{\n  border-radius: 50%;\n  width: 15px;\n  height: 15px;\n  padding: 5px;\n  margin: -10px 0 0 -10px;\n  font-size: 18px;\n  color: red;\n}\n.chose-color{\n  width: 100%;\n  background-color: #f2f2f2;\n  /*border: #999999 1px solid;*/\n  height: 30px;\n  margin-top: 10px;\n  /*margin-left: 15px;*/\n  border-radius: 7px;\n  float: left;\n}\n.main-out{\n  margin-top: -10px;\n  margin-left: 0px;\n  width: 100%;\n  /*background-color: #333333;*/\n}\n.aside-title{\n  text-align: center;\n  width: 80%;\n  /*background-color: #999999;*/\n  margin-left: 20px;\n}\n.text-item{\n  /*white-space: pre-line;*/\n  white-space: pre-wrap;\n  /*word-wrap:break-word;*/\n  width: 100%;\n  height: 100%;\n  /*display: flex;*/\n  /*background-color: #999999;*/\n}\n.el-divider--horizontal {\n  display: block;\n  height: 1px;\n  /*width: 70%;*/\n  /*margin: 24px 14%;*/\n  width: 30%;\n  margin: 20px 35% 10px 35%;\n  background-color: orange;\n  box-shadow: 0 0 5px orange;\n}\n.div-side-search-date{\n  margin-top: 10px;\n  background-color: #fff6ef;\n  width: 265px;\n  display: flex;\n  margin-left: 20px;\n  border-radius: 10px;\n}\n.button-search-date{\n  height: 38px;\n  width: 60px;\n  border-radius: 10px;\n  margin-top: 11px;\n  margin-left: 15px;\n  margin-bottom: 5px;\n  padding: 10px;\n}\n.el-date-picker-1{\n  margin-left: 15px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n.el-date-picker-1[data-v-32487c3e] {\n  width: 160px;\n}\n.div-img-in{\n  position: relative;\n  /*width: 95%;*/\n  padding: 15px;\n  height: 700px;\n  margin: 0px 0 30px 0;\n  /*border: grey 1px solid;*/\n  /*border-radius: 5px;*/\n}\n.article-card{\n  margin-top: 10px;\n  margin-left: -20px;\n  border-radius: 15px;\n  width: 100%;\n  /*background-color: #42b983;*/\n  height: 96%;\n}\n\n::-webkit-scrollbar {\n  width: 0 !important;\n}\n::-webkit-scrollbar {\n  width: 0 !important;height: 0;\n}\n\n.diary-div-pics{\n  overflow:auto;\n  text-overflow:ellipsis;\n  width: 95%;\n  height: 650px;\n  border-radius: 10px;\n  margin: 5px 0 10px 5px;\n  border-bottom: #666666 .1px solid;\n  border-top: #666666 .1px solid;\n  /*box-shadow: 0 0 5px #666666;*/\n}\n.div-img-out{\n  width: 32%;\n  /*border: black 1px solid;*/\n  margin: 10px 0 0 10px;\n  border-radius: 10px;\n  height: 100%;\n  overflow-x:auto;\n  overflow-y: hidden;\n  box-shadow: 0 0 5px #bebebe;\n  padding:10px;\n}\n\n.div-img-button-edit{\n  text-align: right;\n}\n/*横向的图片*/\n.div-image-out{\n  display: flex;\n  width:100%;\n}\n.div-out-width{\n  width:100%;\n  /*background-color: #42b983;*/\n}\n.button-flooter{\n  margin: 20px 0 0 0 ;\n  text-align: right;\n}\n.input-img-name>>>.el-input__inner {\n  border: 0;\n  color:red;\n  font-size: 24px;\n  font-weight: 1000;\n}\n\n.input-img-name>>>.el-textarea__inner {\n  border: 0;\n  color: #ff9900;\n  resize: none;\n  font-size: 24px;\n  font-weight: 1000;\n  padding: 0;\n\n}\n/* 如果你的 el-input type 设置成textarea ，就要用这个了 */\n.input-img-info>>>.el-textarea__inner {\n  border: 0;\n  color: #868686;\n  padding: 0;\n}\n.el-dialog__body {\n  padding: 30px 20px;\n  color: #606266;\n  font-size: 14px;\n  word-break: break-all;\n}\n.image-view{\n  border: #999999 0.1px solid;\n  padding:10px;\n  width: 60%;\n  height: 0%;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import axios from 'axios';\nimport { Message } from 'element-ui';\nimport router from '../router';\n\n// 请求拦截器\naxios.interceptors.request.use(config => {\n  // 如果存在 token，请求携带这个 token\n  if (window.sessionStorage.getItem('tokenStr')) {\n    config.headers['Authorization'] = window.sessionStorage.getItem('tokenStr');\n  }\n  return config;\n}, error => {\n  console.log(error);\n});\n\n// 响应拦截器\naxios.interceptors.response.use(success => {\n  // 业务逻辑错误\n  alert(\"xxxxx--1\");\n  if (success.status && success.status == 200) {\n    alert(\"xxxxx--2\");\n    if (success.data.code == 500 || success.data.code == 401 || success.data.code == 403) {\n      alert(\"xxxxx--3\");\n      Message.error({\n        message: success.data.message\n      });\n      return;\n    }\n    alert(\"xxxxx4\");\n    if (success.data.message) {\n      alert(\"xxxxx5\");\n      Message.success({\n        message: success.data.message\n      });\n    }\n  }\n  return success.data;\n}, error => {\n  if (error.response.code == 504 || error.response.code == 404) {\n    Message.error({\n      message: '服务器被吃了'\n    });\n  } else if (error.response.code == 403) {\n    Message.error({\n      message: '权限不足，请联系管理员！'\n    });\n  } else if (error.response.ocde == 401) {\n    Message.error({\n      message: '尚未登录，请登录！！！'\n    });\n    router.replace('/');\n  } else {\n    if (error.response.data.message) {\n      Message.error({\n        message: error.response.data.message\n      });\n    } else {\n      Message.error({\n        message: '未知错误 o(╯□╰)o'\n      });\n    }\n  }\n  return;\n  // alert(\"xxx222\");\n});\n\nlet base = '';\nexport const postRequest = (url, params) => {\n  return axios({\n    method: 'post',\n    url: `${base}${url}`,\n    data: params\n  });\n};\nexport const putRequest = (url, params) => {\n  return axios({\n    method: 'put',\n    url: `${base}${url}`,\n    data: params\n  });\n};\nexport const getRequest = (url, params) => {\n  return axios({\n    method: 'get',\n    url: `${base}${url}`,\n    data: params\n  });\n};\nexport const deleteRequest = (url, params) => {\n  return axios({\n    method: 'delete',\n    url: `${base}${url}`,\n    data: params\n  });\n};","map":{"version":3,"names":["axios","Message","router","interceptors","request","use","config","window","sessionStorage","getItem","headers","error","console","log","response","success","alert","status","data","code","message","ocde","replace","base","postRequest","url","params","method","putRequest","getRequest","deleteRequest"],"sources":["/Users/hsk/Project/Diary/web/src/utils/api.js"],"sourcesContent":["import axios from 'axios'\nimport { Message } from 'element-ui';\nimport router from '../router'\n\n\n// 请求拦截器\naxios.interceptors.request.use(config=>{\n    // 如果存在 token，请求携带这个 token\n    if(window.sessionStorage.getItem('tokenStr')){\n        config.headers['Authorization'] = window.sessionStorage.getItem('tokenStr');\n    }\n    return config;\n},error=>{\n    console.log(error);\n})\n\n// 响应拦截器\naxios.interceptors.response.use(success=>{\n    // 业务逻辑错误\n    alert(\"xxxxx--1\")\n\n    if(success.status && success.status == 200){\n        alert(\"xxxxx--2\")\n\n        if(success.data.code == 500 || success.data.code == 401 || success.data.code == 403){\n            alert(\"xxxxx--3\")\n\n            Message.error({message:success.data.message});\n            return;\n        }\n        alert(\"xxxxx4\")\n\n        if(success.data.message){\n            alert(\"xxxxx5\")\n\n            Message.success({message:success.data.message});\n        }\n    }\n    return success.data;\n\n},error=>{\n    if(error.response.code == 504 || error.response.code == 404){\n        Message.error({message:'服务器被吃了'});\n    }else if(error.response.code == 403){\n        Message.error({message:'权限不足，请联系管理员！'});\n    }else if(error.response.ocde == 401){\n        Message.error({message:'尚未登录，请登录！！！'});\n        router.replace('/');\n    }else{\n        if(error.response.data.message){\n            Message.error({message:error.response.data.message});\n        }else{\n            Message.error({message:'未知错误 o(╯□╰)o'});\n        }\n    }\n    return;\n    // alert(\"xxx222\");\n})\n\n\nlet base = '';\nexport const postRequest=(url,params)=>{\n    return axios({\n        method: 'post',\n        url:`${base}${url}`,\n        data:params\n    })\n}\n\nexport const putRequest=(url,params)=>{\n    return axios({\n        method:'put',\n        url:`${base}${url}`,\n        data:params\n    })\n}\n\nexport const getRequest=(url,params)=>{\n    return axios({\n        method:'get',\n        url:`${base}${url}`,\n        data:params\n    })\n}\n\nexport const deleteRequest=(url,params)=>{\n    return axios({\n        method:'delete',\n        url:`${base}${url}`,\n        data:params\n    })\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
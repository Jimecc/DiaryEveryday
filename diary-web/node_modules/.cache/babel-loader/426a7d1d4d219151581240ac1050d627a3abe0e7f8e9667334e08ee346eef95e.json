{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getRequest } from \"./api\";\nexport const initMenu = (router, store) => {\n  if (store.state.routes.length > 0) {\n    return;\n  }\n  getRequest('/menu/menu').then(data => {\n    if (data) {\n      // 格式化好的router\n      let fmtRoutes = formatRoutes(data);\n      // 添加到路由\n      router.addRoutes(fmtRoutes);\n      // 将数据存入Vuex\n      store.commit('initRoutes', fmtRoutes);\n    }\n  });\n};\nexport const formatRoutes = routes => {\n  let fmtRoutes = [];\n  routes.forEach(router => {\n    let {\n      path,\n      component,\n      name,\n      iconCls,\n      children\n    } = router;\n    if (children && children instanceof Array) {\n      // 递归\n      children = formatRoutes(children);\n    }\n    let fmRouter = {\n      path: path,\n      name: name,\n      iconCls: iconCls,\n      children: children,\n      component(resolve) {\n        if (component.startsWith('Home')) {\n          require(['../views/' + component + '.vue'], resolve);\n        } else if (component.startsWith('Emp')) {\n          require(['../views/emp/' + component + '.vue'], resolve);\n        } else if (component.startsWith('Per')) {\n          require(['../views/per/' + component + '.vue'], resolve);\n        } else if (component.startsWith('Sal')) {\n          require(['../views/sal/' + component + '.vue'], resolve);\n        } else if (component.startsWith('Sta')) {\n          require(['../views/sta/' + component + '.vue'], resolve);\n        } else if (component.startsWith('Sys')) {\n          require(['../views/sys/' + component + '.vue'], resolve);\n        }\n      }\n    };\n    fmtRoutes.push(fmRouter);\n  });\n  return fmtRoutes;\n};","map":{"version":3,"names":["getRequest","initMenu","router","store","state","routes","length","then","data","fmtRoutes","formatRoutes","addRoutes","commit","forEach","path","component","name","iconCls","children","Array","fmRouter","resolve","startsWith","require","push"],"sources":["/Users/hsk/Project/Diary/web/src/utils/menu.js"],"sourcesContent":["import {getRequest} from \"./api\";\n\n\nexport const initMenu = (router,store) =>{\n    if(store.state.routes.length>0){\n        return;\n    }\n\n    getRequest('/menu/menu').then(data=>{\n        if(data){\n            // 格式化好的router\n            let fmtRoutes = formatRoutes(data);\n            // 添加到路由\n            router.addRoutes(fmtRoutes);\n            // 将数据存入Vuex\n            store.commit('initRoutes',fmtRoutes);\n\n        }\n    })\n}\n\nexport const formatRoutes = (routes) => {\n    let fmtRoutes = [];\n    routes.forEach(router=>{\n        let{\n            path,\n            component,\n            name,\n            iconCls,\n            children,\n        }=router;\n\n        if(children && children instanceof Array){\n            // 递归\n            children = formatRoutes(children);\n        }\n        let fmRouter={\n            path:path,\n            name:name,\n            iconCls:iconCls,\n            children:children,\n            component(resolve){\n                if(component.startsWith('Home')){\n                    require(['../views/'+component+'.vue'],resolve);\n                }else if(component.startsWith('Emp')){\n                    require(['../views/emp/'+component+'.vue'],resolve);\n                }else if(component.startsWith('Per')){\n                    require(['../views/per/'+component+'.vue'],resolve);\n                }else if(component.startsWith('Sal')){\n                    require(['../views/sal/'+component+'.vue'],resolve);\n                }else if(component.startsWith('Sta')){\n                    require(['../views/sta/'+component+'.vue'],resolve);\n                }else if(component.startsWith('Sys')){\n                    require(['../views/sys/'+component+'.vue'],resolve);\n                }\n            }\n        }\n\n        fmtRoutes.push(fmRouter);\n    });\n    return fmtRoutes;\n\n}\n"],"mappings":";AAAA,SAAQA,UAAU,QAAO,OAAO;AAGhC,OAAO,MAAMC,QAAQ,GAAG,CAACC,MAAM,EAACC,KAAK,KAAI;EACrC,IAAGA,KAAK,CAACC,KAAK,CAACC,MAAM,CAACC,MAAM,GAAC,CAAC,EAAC;IAC3B;EACJ;EAEAN,UAAU,CAAC,YAAY,CAAC,CAACO,IAAI,CAACC,IAAI,IAAE;IAChC,IAAGA,IAAI,EAAC;MACJ;MACA,IAAIC,SAAS,GAAGC,YAAY,CAACF,IAAI,CAAC;MAClC;MACAN,MAAM,CAACS,SAAS,CAACF,SAAS,CAAC;MAC3B;MACAN,KAAK,CAACS,MAAM,CAAC,YAAY,EAACH,SAAS,CAAC;IAExC;EACJ,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMC,YAAY,GAAIL,MAAM,IAAK;EACpC,IAAII,SAAS,GAAG,EAAE;EAClBJ,MAAM,CAACQ,OAAO,CAACX,MAAM,IAAE;IACnB,IAAG;MACCY,IAAI;MACJC,SAAS;MACTC,IAAI;MACJC,OAAO;MACPC;IACJ,CAAC,GAAChB,MAAM;IAER,IAAGgB,QAAQ,IAAIA,QAAQ,YAAYC,KAAK,EAAC;MACrC;MACAD,QAAQ,GAAGR,YAAY,CAACQ,QAAQ,CAAC;IACrC;IACA,IAAIE,QAAQ,GAAC;MACTN,IAAI,EAACA,IAAI;MACTE,IAAI,EAACA,IAAI;MACTC,OAAO,EAACA,OAAO;MACfC,QAAQ,EAACA,QAAQ;MACjBH,SAAS,CAACM,OAAO,EAAC;QACd,IAAGN,SAAS,CAACO,UAAU,CAAC,MAAM,CAAC,EAAC;UAC5BC,OAAO,CAAC,CAAC,WAAW,GAACR,SAAS,GAAC,MAAM,CAAC,EAACM,OAAO,CAAC;QACnD,CAAC,MAAK,IAAGN,SAAS,CAACO,UAAU,CAAC,KAAK,CAAC,EAAC;UACjCC,OAAO,CAAC,CAAC,eAAe,GAACR,SAAS,GAAC,MAAM,CAAC,EAACM,OAAO,CAAC;QACvD,CAAC,MAAK,IAAGN,SAAS,CAACO,UAAU,CAAC,KAAK,CAAC,EAAC;UACjCC,OAAO,CAAC,CAAC,eAAe,GAACR,SAAS,GAAC,MAAM,CAAC,EAACM,OAAO,CAAC;QACvD,CAAC,MAAK,IAAGN,SAAS,CAACO,UAAU,CAAC,KAAK,CAAC,EAAC;UACjCC,OAAO,CAAC,CAAC,eAAe,GAACR,SAAS,GAAC,MAAM,CAAC,EAACM,OAAO,CAAC;QACvD,CAAC,MAAK,IAAGN,SAAS,CAACO,UAAU,CAAC,KAAK,CAAC,EAAC;UACjCC,OAAO,CAAC,CAAC,eAAe,GAACR,SAAS,GAAC,MAAM,CAAC,EAACM,OAAO,CAAC;QACvD,CAAC,MAAK,IAAGN,SAAS,CAACO,UAAU,CAAC,KAAK,CAAC,EAAC;UACjCC,OAAO,CAAC,CAAC,eAAe,GAACR,SAAS,GAAC,MAAM,CAAC,EAACM,OAAO,CAAC;QACvD;MACJ;IACJ,CAAC;IAEDZ,SAAS,CAACe,IAAI,CAACJ,QAAQ,CAAC;EAC5B,CAAC,CAAC;EACF,OAAOX,SAAS;AAEpB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}
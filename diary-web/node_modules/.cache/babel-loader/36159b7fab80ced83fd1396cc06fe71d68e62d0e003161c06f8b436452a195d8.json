{"ast":null,"code":"import mavonEditor from 'mavon-editor'; //引入mavon-editor 就是上面所安装的\nVue.use(mavonEditor);\nimport router from './router';\nimport Vue from 'vue';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport App from './App.vue';\nimport 'mavon-editor/dist/css/index.css';\n// import 'font-awesome/css/font-awesome.css'\n\nVue.use(ElementUI);\nVue.config.productionTip = false;\nimport store from \"./store\";\nimport { postRequest } from \"./utils/api\";\nimport { getRequest } from \"./utils/api\";\nimport { putRequest } from \"./utils/api\";\nimport { deleteRequest } from \"./utils/api\";\n// import {downloadRequest} from \"./utils/download\";\n\nVue.prototype.postRequest = postRequest;\nVue.prototype.getRequest = getRequest;\nVue.prototype.putRequest = putRequest;\nVue.prototype.deleteRequest = deleteRequest;\nif (window.history && window.history.pushState) {\n  history.pushState(null, null, document.URL);\n  window.addEventListener('popstate', this.goBack, false);\n}\nrouter.beforeEach((to, from, next) => {\n  console.log(window.sessionStorage.getItem('tokenStr'));\n  console.log(window.sessionStorage.getItem('user'));\n  if (window.sessionStorage.getItem('tokenStr')) {\n    if (!window.sessionStorage.getItem('user')) {\n      // 判断用户信息是否存在\n      return getRequest('/user/info').then(resp => {\n        if (resp) {\n          window.sessionStorage.setItem('user', JSON.stringify(resp));\n          next('/');\n        }\n      });\n    }\n    next();\n  } else {\n    if (to.path == '/login' || to.path == '/register') {\n      next();\n    } else {\n      next('/login?redirect=' + to.path);\n    }\n  }\n});\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app');","map":{"version":3,"names":["mavonEditor","Vue","use","router","ElementUI","App","config","productionTip","store","postRequest","getRequest","putRequest","deleteRequest","prototype","window","history","pushState","document","URL","addEventListener","goBack","beforeEach","to","from","next","console","log","sessionStorage","getItem","then","resp","setItem","JSON","stringify","path","render","h","$mount"],"sources":["/Users/hsk/Project/Diary/web/src/main.js"],"sourcesContent":["import mavonEditor from 'mavon-editor'  //引入mavon-editor 就是上面所安装的\nVue.use(mavonEditor)\n\n\nimport router from './router'\nimport Vue from 'vue';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport App from './App.vue';\nimport 'mavon-editor/dist/css/index.css'\n// import 'font-awesome/css/font-awesome.css'\n\nVue.use(ElementUI);\nVue.config.productionTip = false\n\nimport store from \"./store\"\n\n\n\nimport {postRequest}    from \"./utils/api\";\nimport {getRequest}     from \"./utils/api\";\nimport {putRequest}     from \"./utils/api\";\nimport {deleteRequest}  from \"./utils/api\";\n// import {downloadRequest} from \"./utils/download\";\n\nVue.prototype.postRequest   = postRequest;\nVue.prototype.getRequest    = getRequest;\nVue.prototype.putRequest    = putRequest;\nVue.prototype.deleteRequest = deleteRequest;\n\nif (window.history && window.history.pushState) {\n  history.pushState(null, null, document.URL);\n  window.addEventListener('popstate', this.goBack, false);\n}\n\nrouter.beforeEach((to,from,next)=>{\n  console.log(window.sessionStorage.getItem('tokenStr'))\n  console.log(window.sessionStorage.getItem('user'));\n  if(window.sessionStorage.getItem('tokenStr')){\n    if(!window.sessionStorage.getItem('user')){\n      // 判断用户信息是否存在\n      return getRequest('/user/info').then(resp=>{\n        if(resp){\n          window.sessionStorage.setItem('user',JSON.stringify(resp));\n          next('/');\n        }\n      })\n    }\n    next();\n  }else{\n    if(to.path == '/login' || to.path == '/register'){\n      next();\n    }else{\n      next('/login?redirect='+to.path);\n    }\n  }\n})\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app')\n\n"],"mappings":"AAAA,OAAOA,WAAW,MAAM,cAAc,EAAE;AACxCC,GAAG,CAACC,GAAG,CAACF,WAAW,CAAC;AAGpB,OAAOG,MAAM,MAAM,UAAU;AAC7B,OAAOF,GAAG,MAAM,KAAK;AACrB,OAAOG,SAAS,MAAM,YAAY;AAClC,OAAO,sCAAsC;AAC7C,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAO,iCAAiC;AACxC;;AAEAJ,GAAG,CAACC,GAAG,CAACE,SAAS,CAAC;AAClBH,GAAG,CAACK,MAAM,CAACC,aAAa,GAAG,KAAK;AAEhC,OAAOC,KAAK,MAAM,SAAS;AAI3B,SAAQC,WAAW,QAAU,aAAa;AAC1C,SAAQC,UAAU,QAAW,aAAa;AAC1C,SAAQC,UAAU,QAAW,aAAa;AAC1C,SAAQC,aAAa,QAAQ,aAAa;AAC1C;;AAEAX,GAAG,CAACY,SAAS,CAACJ,WAAW,GAAKA,WAAW;AACzCR,GAAG,CAACY,SAAS,CAACH,UAAU,GAAMA,UAAU;AACxCT,GAAG,CAACY,SAAS,CAACF,UAAU,GAAMA,UAAU;AACxCV,GAAG,CAACY,SAAS,CAACD,aAAa,GAAGA,aAAa;AAE3C,IAAIE,MAAM,CAACC,OAAO,IAAID,MAAM,CAACC,OAAO,CAACC,SAAS,EAAE;EAC9CD,OAAO,CAACC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAEC,QAAQ,CAACC,GAAG,CAAC;EAC3CJ,MAAM,CAACK,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAACC,MAAM,EAAE,KAAK,CAAC;AACzD;AAEAjB,MAAM,CAACkB,UAAU,CAAC,CAACC,EAAE,EAACC,IAAI,EAACC,IAAI,KAAG;EAChCC,OAAO,CAACC,GAAG,CAACZ,MAAM,CAACa,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC;EACtDH,OAAO,CAACC,GAAG,CAACZ,MAAM,CAACa,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EAClD,IAAGd,MAAM,CAACa,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC,EAAC;IAC3C,IAAG,CAACd,MAAM,CAACa,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,EAAC;MACxC;MACA,OAAOlB,UAAU,CAAC,YAAY,CAAC,CAACmB,IAAI,CAACC,IAAI,IAAE;QACzC,IAAGA,IAAI,EAAC;UACNhB,MAAM,CAACa,cAAc,CAACI,OAAO,CAAC,MAAM,EAACC,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC,CAAC;UAC1DN,IAAI,CAAC,GAAG,CAAC;QACX;MACF,CAAC,CAAC;IACJ;IACAA,IAAI,EAAE;EACR,CAAC,MAAI;IACH,IAAGF,EAAE,CAACY,IAAI,IAAI,QAAQ,IAAIZ,EAAE,CAACY,IAAI,IAAI,WAAW,EAAC;MAC/CV,IAAI,EAAE;IACR,CAAC,MAAI;MACHA,IAAI,CAAC,kBAAkB,GAACF,EAAE,CAACY,IAAI,CAAC;IAClC;EACF;AACF,CAAC,CAAC;AACF,IAAIjC,GAAG,CAAC;EACNE,MAAM;EACNK,KAAK;EACL2B,MAAM,EAAEC,CAAC,IAAIA,CAAC,CAAC/B,GAAG;AACpB,CAAC,CAAC,CAACgC,MAAM,CAAC,MAAM,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}